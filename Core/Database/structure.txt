CREATE TABLE user ( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, nom VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, roles LONGTEXT COMMENT "json_array", validationDate DATETIME, phone VARCHAR(255), nbJour INT, credits INT, adress_id INT  );
CREATE TABLE adress ( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, num VARCHAR(255) NOT NULL, rue VARCHAR(255) NOT NULL, postalCode VARCHAR(255) NOT NULL, city VARCHAR(255) NOT NULL );
CREATE TABLE demand ( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, formation_id INT  NOT NULL, user_id INT  NOT NULL, etat INT NOT NULL DEFAULT '1' );
CREATE TABLE equipe_user ( equipe_id INT , employe_id INT );
CREATE TABLE equipe ( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, nom VARCHAR(255) NOT NULL );
CREATE TABLE formation ( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, nom VARCHAR(255) NOT NULL, contenu TEXT NOT NULL, deb DATETIME NOT NULL, duree DATETIME NOT NULL, prestataire_id INT  NOT NULL, prerequis INT NOT NULL, adress_id INT  NOT NULL );
CREATE TABLE message ( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, receiver_id INT  NOT NULL, send_id INT  NOT NULL, message TEXT NOT NULL, date DATETIME NOT NULL );
CREATE TABLE prestataire ( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, nom VARCHAR(255) NOT NULL, fonction VARCHAR(255) NOT NULL, adress_id INT  NOT NULL );
ALTER TABLE user ADD CONSTRAINT FK_8D93D6495CECC7BE FOREIGN KEY (adress_id) REFERENCES adress(id);
ALTER TABLE demand ADD CONSTRAINT FK_428D7973404021BF FOREIGN KEY (formation_id) REFERENCES formation(id);
ALTER TABLE demand ADD CONSTRAINT FK_428D79738D93D649 FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE equipe_user ADD CONSTRAINT FK_84DA47B78D93D649 FOREIGN KEY (employe_id) REFERENCES user(id);
ALTER TABLE equipe_user ADD CONSTRAINT FK_84DA47B76D861B89 FOREIGN KEY (equipe_id) REFERENCES equipe(id);
ALTER TABLE formation ADD CONSTRAINT FK_404021BF60A26480 FOREIGN KEY (prestataire_id) REFERENCES prestataire(id);
ALTER TABLE formation ADD CONSTRAINT FK_404021BF5CECC7BE FOREIGN KEY (adress_id) REFERENCES adress(id);
ALTER TABLE message ADD CONSTRAINT FK_B6BD307F8D93D649 FOREIGN KEY (receiver_id) REFERENCES user(id);
ALTER TABLE message ADD CONSTRAINT FK_B6BD307F8D93D649 FOREIGN KEY (send_id) REFERENCES user(id);
ALTER TABLE prestataire ADD CONSTRAINT FK_60A264805CECC7BE FOREIGN KEY (adress_id) REFERENCES adress(id);